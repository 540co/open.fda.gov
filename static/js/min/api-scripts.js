function createAnchorsFromHeadings(){return $("h2, h3, h4, h5, h6").each(function(e,t){var a,n,r;return a=$(t),r=a.attr("id"),n='<i class="fa fa-link"></i>',r?a.append($("<a />").addClass("header-link").attr("href","#"+r).html(n)):void 0})}function createNavigationSidebarFromHeadings(){var e="",t=null;$(".reference :header").not(".noindex").each(function(){var a=$(this),n=this.tagName,r=n.substr(1,1),i=a.text(),o="#"+a.attr("id"),s="";if(null===t)s="";else if(r>t)s="<ul>";else if(t>r)for(var d=t-r,u=0;d>u;u++)s+="</ul></li>";else t===r&&(s="</li>");s+="<li><a href='"+o+"'>"+i+"</a>",e+=s,t=r}),$("#reference-nav-ul").prepend(e)}if(!library)var library={};library.json={replacer:function(e,t,a,n,r){var i="<span class=json-key>",o="<span class=json-value>",s="<span class=json-string>",d=t||"";return a&&(d=d+i+a.replace(/[": ]/g,"")+"</span>: "),n&&(d=d+('"'==n[0]?s:o)+n+"</span>"),d+(r||"")},prettyPrint:function(e){var t=/^( *)("[\w]+": )?("[^"]*"|[\w.+-]*)?([,[{])?$/gm;return JSON.stringify(e,null,3).replace(/&/g,"&amp;").replace(/\\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(t,library.json.replacer)}},$(document).ready(function(){if(createNavigationSidebarFromHeadings(),createAnchorsFromHeadings(),$("textarea").autosize(),$(".reference-nav").affix({offset:{top:function(){return this.top=$(".reference-nav").offset().top-12}}}),$("#api-status-updated").length>0){var e,t,a=$("#api-status-updated").find("#endpoint").html(),n=$("#api-status-updated").find("#count").html();$.getJSON(a+"count="+n).success(function(a){if(a.results){var n=a.results[a.results.length-1].time.replace(/(\d{4})(\d{2})(\d{2})/,"$1-$2-$3");e="Updated "+a.meta.last_updated,t="Data current through "+n,$("#api-status-updated").find("#date-updated").text("API OK | "+e+" | "),$("#api-status-updated").find("#date-latest").text(t)}else{var r="This API is down right now.";$("#api-status-updated").find("#date-updated").text(r)}}).error(function(){var e="This API is down right now.";$("#api-status-updated").find("#date-updated").text(e)})}$(".api-status").length>0&&$.getJSON("//api.fda.gov/status").done(function(e){var t={};for(item in e)"recall"==e[item].endpoint?(t["/drug/enforcement.json"]={status:e[item].status,last_updated:e[item].last_updated},t["/device/enforcement.json"]={status:e[item].status,last_updated:e[item].last_updated},t["/food/enforcement.json"]={status:e[item].status,last_updated:e[item].last_updated}):"drugevent"==e[item].endpoint?t["/drug/event.json"]={status:e[item].status,last_updated:e[item].last_updated}:"druglabel"==e[item].endpoint?t["/drug/label.json"]={status:e[item].status,last_updated:e[item].last_updated}:"deviceevent"==e[item].endpoint&&(t["/device/event.json"]={status:e[item].status,last_updated:e[item].last_updated});$(".api-status").each(function(){var e=this,a=$(e).data("endpoint");t[a]?"GREEN"==t[a].status?($(e).find(".status").text("OK"),$(e).find(".updated").text(t[a].last_updated),$(e).find(".metric").addClass("visible"),$(e).addClass("green")):"YELLOW"==t[a].status?($(e).find(".status").text("Slow"),$(e).find(".updated").text(t[a].last_updated),$(e).find(".metric").addClass("visible"),$(e).addClass("yellow")):"RED"==t[a].status&&($(e).find(".status").text("Down"),$(e).find(".updated").text(t[a].last_updated),$(e).find(".metric").addClass("visible"),$(e).addClass("red")):($(e).find(".status").text("No information available"),$(e).find(".updated").text("—"),$(e).find(".metric").addClass("visible"))})}).fail(function(){$(".api-status").each(function(){var e=this;$(e).data("endpoint"),$(e).find(".status").text("API status server not responding"),$(e).find(".updated").text("—"),$(e).find(".metric").addClass("visible")})}),$(".api-explorer button.go").click(function(){var e=$(this).parents(".api-explorer-form").find(".api-explorer-query").val(),t=$(this).parents("div.api-explorer").find(".return");$(this),$(t).find(".response pre").html("Loading..."),$.getJSON(e,function(e){$(t).find(".response pre").html(library.json.prettyPrint(e)),$(t).parent().find(".response-close").remove(),$(t).find(".response pre").after('<button class="btn pull-left response-close">Close</button>'),$(t).height()>200&&$(t).find(".response pre").before('<button class="btn pull-left response-close">Close</button>'),$(".response-close").click(function(){$(this).parent().find("pre").html('Click "Run query" to see its results.'),$(this).parent().find(".response-close").remove()})}).fail(function(){$(t).find(".response pre").html("The API response was an error. Check the syntax and give it another try.")})}),$(".api-explorer-query").keypress(function(e){var t=e.keyCode?e.keyCode:e.which,a=$(this).parents("div.api-explorer").find("button.go");32===t?e.preventDefault():13===t&&(e.preventDefault(),$(a).trigger("click"))})});